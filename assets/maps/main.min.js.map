{"version":3,"sources":["productControl.js"],"names":["Product","self","container","footnote","title","_classCallCheck","this","undefined","_self","_container","querySelectorAll","_footnote","_title","init","_createClass","key","value","classList","contains","innerHTML","getAttribute","toggle","remove","add","addEventListener","_checked","_checkFootnote","onclick","e","target","_mouseenter","_mouseleave","products","document","i","length"],"mappings":"oZAAC,WAqGG,IArGS,IAEHA,EAFG,WAGL,SAAAA,EAAYC,EAAMC,EAAWC,EAAUC,GACnC,GAD0CC,gBAAAC,KAAAN,QAC7BO,IAATN,EACA,OAAO,EAEXK,KAAKE,MAAQP,EACbK,KAAKG,WAAaH,KAAKE,MAAME,iBAAiB,IAAMR,GAAW,GAC/DI,KAAKK,UAAYL,KAAKE,MAAME,iBAAiB,IAAMP,GAAU,GAC7DG,KAAKM,OAASN,KAAKE,MAAME,iBAAiB,IAAMN,GAAO,GACvDE,KAAKO,OAXJ,OAAAC,aAAAd,EAAA,CAAA,CAAAe,IAAA,iBAAAC,MAAA,WAgBGV,KAAKE,MAAMS,UAAUC,SAAS,YAC9BZ,KAAKK,UAAUQ,UAAYb,KAAKK,UAAUS,aAAa,iBAElDd,KAAKE,MAAMS,UAAUC,SAAS,YACnCZ,KAAKK,UAAUQ,UAAYb,KAAKK,UAAUS,aAAa,iBAGvDd,KAAKK,UAAUQ,UAAf,uFAvBH,CAAAJ,IAAA,WAAAC,MAAA,WA6BD,GAAIV,KAAKE,MAAMS,UAAUC,SAAS,YAC9B,OAAO,EAGPZ,KAAKE,MAAMS,UAAUI,OAAO,YACvBf,KAAKE,MAAMS,UAAUC,SAAS,cAC/BZ,KAAKM,OAAOO,UAAYb,KAAKM,OAAOQ,aAAa,cACjDd,KAAKM,OAAOK,UAAUK,OAAO,gCApCpC,CAAAP,IAAA,cAAAC,MAAA,WA2CGV,KAAKE,MAAMS,UAAUC,SAAS,cAC9BZ,KAAKM,OAAOO,UAAYb,KAAKM,OAAOQ,aAAa,cACjDd,KAAKM,OAAOK,UAAUK,OAAO,gCA7ChC,CAAAP,IAAA,cAAAC,MAAA,WAmDGV,KAAKE,MAAMS,UAAUC,SAAS,cAC9BZ,KAAKM,OAAOO,UAAYb,KAAKM,OAAOQ,aAAa,cACjDd,KAAKM,OAAOK,UAAUM,IAAI,gCArD7B,CAAAR,IAAA,OAAAC,MAAA,WA2DD,IAAIf,EAAOK,KAGXL,EAAKQ,WAAWe,iBAAiB,QAAS,WACtCvB,EAAKwB,WACLxB,EAAKyB,mBAKTzB,EAAKO,MAAMmB,QAAU,SAASC,GAC1B,GAAuErB,MAAnEN,EAAKO,MAAME,iBAAiB,iCAAiC,GAC7D,OAAO,EAGEkB,EAAEC,QACC5B,EAAKO,MAAME,iBAAiB,iCAAiC,KAGzET,EAAKwB,WACLxB,EAAKyB,mBAIbzB,EAAKQ,WAAWe,iBAAiB,aAAc,WAC3CvB,EAAK6B,gBAGT7B,EAAKQ,WAAWe,iBAAiB,aAAc,WAC3CvB,EAAK8B,gBAKT9B,EAAKyB,qBA7FJ1B,EAAA,GAkGLgC,EAAWC,SAASvB,iBAAiB,gBAGhCwB,EAAI,EAAGA,EAAIF,EAASG,SAAUD,EAErB,IAAIlC,EADPgC,EAASE,GACY,yBAA0B,wBAAyB,sBAvG1F","file":"../modules/main.min.js","sourcesContent":[";(function() {\r\n\r\n    class Product {\r\n        constructor(self, container, footnote, title) {\r\n            if (self === undefined) {\r\n                return false;\r\n            }\r\n            this._self = self;\r\n            this._container = this._self.querySelectorAll('.' + container)[0];\r\n            this._footnote = this._self.querySelectorAll('.' + footnote)[0];\r\n            this._title = this._self.querySelectorAll('.' + title)[0];\r\n            this.init();\r\n        }\r\n\r\n        // Проверка продукта на состояние и расставление подписей под ним.\r\n        _checkFootnote() {\r\n            if (this._self.classList.contains('selected')) {\r\n                this._footnote.innerHTML = this._footnote.getAttribute('data-selected');\r\n            }\r\n            else if (this._self.classList.contains('disabled')) {\r\n                this._footnote.innerHTML = this._footnote.getAttribute('data-disabled');\r\n            }\r\n            else {\r\n                this._footnote.innerHTML = `Чего сидишь? Порадуй котэ, <span class=\"product-box__footnote-button\">купи.</span>`;\r\n            }\r\n        }\r\n\r\n        // Выбор продукта или бездействие при состоянии disabled.\r\n        _checked() {\r\n            if (this._self.classList.contains('disabled')) {\r\n                return false;\r\n            }\r\n            else {\r\n                this._self.classList.toggle('selected');\r\n                if (!this._self.classList.contains('selected')) {\r\n                    this._title.innerHTML = this._title.getAttribute('data-title');\r\n                    this._title.classList.remove('product-box__title--color');\r\n                }\r\n            }\r\n        }\r\n\r\n        // Проверка на состояние selected и срабатывание hover`а при потере наведения.\r\n        _mouseleave() {\r\n            if (this._self.classList.contains('selected')) {\r\n                this._title.innerHTML = this._title.getAttribute('data-title');\r\n                this._title.classList.remove('product-box__title--color');\r\n            }\r\n        }\r\n\r\n        // Проверка на состояние selected и срабатывание hover`а при наведении.\r\n        _mouseenter() {\r\n            if (this._self.classList.contains('selected')) {\r\n                this._title.innerHTML = this._title.getAttribute('data-hover');\r\n                this._title.classList.add('product-box__title--color');\r\n            }\r\n        }\r\n\r\n        // Инициализация\r\n        init() {\r\n            let self = this;\r\n\r\n            // Клик по контейнеру\r\n            self._container.addEventListener('click', function() {\r\n                self._checked();\r\n                self._checkFootnote();\r\n            });\r\n\r\n            // Клик по по слову 'купи'. Т.к. слово 'купи' появляется динамически\r\n            // приходится при клике искать существование эелеменкта\r\n            self._self.onclick = function(e) {\r\n                if (self._self.querySelectorAll('.product-box__footnote-button')[0] == undefined) {\r\n                    return false;\r\n                }\r\n\r\n                let target = e.target;\r\n                let buyButton = self._self.querySelectorAll('.product-box__footnote-button')[0];\r\n\r\n                if (target == buyButton) {\r\n                    self._checked();\r\n                    self._checkFootnote();\r\n                }\r\n            }\r\n\r\n            self._container.addEventListener('mouseenter', function() {\r\n                self._mouseenter();\r\n            });\r\n\r\n            self._container.addEventListener('mouseleave', function() {\r\n                self._mouseleave();\r\n            });\r\n\r\n            // При инициализации проходим по всем продуктам и расставляем\r\n            // нужные подписи\r\n            self._checkFootnote();\r\n        }\r\n    }\r\n\r\n    // Объявляем коллекцию продуктов.\r\n    let products = document.querySelectorAll('.product-box');\r\n\r\n    // Fix для IE11 т.к. он не может перебирать коллекции через forEach\r\n    for (let i = 0; i < products.length; ++i) {\r\n        let item = products[i];\r\n        let product = new Product(item, 'product-box__container', 'product-box__footnote', 'product-box__title');\r\n    }\r\n\r\n\r\n})();\r\n"]}